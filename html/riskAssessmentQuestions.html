<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8">
  <title>糖尿病肾病症状评测</title>
  <link rel="stylesheet" type="text/css" href="../lib/css/weui.min.css" />
  <link rel="stylesheet" type="text/css" href="../lib/css/jquery-weui.css" />
  <link rel="stylesheet" type="text/css" href="../custom/css/common.css" />
  <link rel="stylesheet" type="text/css" href="../custom/css/riskAssessment.css" />

</head>

<body>
<div class="riskAssessment riskAssessmentQuestion">
  <form>
    <h2>请勾选符合您情况的选项<em>1/1</em></h2>
    <ul class="listCheckbox kidney" style="display: none;">
      <li class="checked">
          <label class="custom_check_label">
              <input type="checkbox" name="" id="kedney1" value="1" hidden />
              <label for="kedney1" class="icon-check"></label>
              <span class="name">糖尿病糖尿病史超过5年</span>
          </label>
      </li>
      <li>
          <label class="custom_check_label">
              <input type="checkbox" name="" id="kedney2" value="2" hidden />
              <label for="kedney2" class="icon-check"></label>
              <span class="name">有糖尿病眼病史</span>
          </label>
      </li>
      <li>
          <label class="custom_check_label">
              <input type="checkbox" name="" id="kedney3" value="3" hidden />
              <label for="kedney3" class="icon-check"></label>
              <span class="name">有高血压史</span>
          </label>
      </li>
      <li>
        <label class="custom_check_label">
          <input type="checkbox" name="" id="kedney4" value="4" hidden />
          <label for="kedney4" class="icon-check"></label>
          <span class="name">尿中泡沫增多或不易消退</span>
        </label>
      </li>
      <li>
        <label class="custom_check_label">
          <input type="checkbox" name="" id="kedney5" value="5" hidden />
          <label for="kedney5" class="icon-check"></label>
          <span class="name">反复眼睑或下肢浮肿</span>
        </label>
      </li>
      <li>
        <label class="custom_check_label">
          <input type="checkbox" name="" id="kedney6" value="6" hidden />
          <label for="kedney6" class="icon-check"></label>
          <span class="name">经常感到乏力、易疲劳</span>
        </label>
      </li>
      <li>
        <label class="custom_check_label">
          <input type="checkbox" name="" id="kedney7" value="7" hidden />
          <label for="kedney7" class="icon-check"></label>
          <span class="name">经常感到腰背酸痛，易抽筋</span>
        </label>
      </li>
      <li>
        <label class="custom_check_label">
          <input type="checkbox" name="" id="kedney8" value="10" hidden />
          <label for="kedney8" class="icon-check"></label>
          <span class="name">以上症状均无</span>
        </label>
      </li>
    </ul>
    <ul class="listCheckbox eye" style="display: none;">
      <li class="checked">
        <label class="custom_check_label">
          <input type="checkbox" name="" id="eye1" value="1" hidden />
          <label for="eye1" class="icon-check"></label>
          <span class="name">有渐进性视力减退</span>
        </label>
      </li>
      <li>
        <label class="custom_check_label">
          <input type="checkbox" name="" id="eye2" value="2" hidden />
          <label for="eye2" class="icon-check"></label>
          <span class="name">视物不清，如隔云烟</span>
        </label>
      </li>
      <li>
        <label class="custom_check_label">
          <input type="checkbox" name="" id="eye3" value="3" hidden />
          <label for="eye3" class="icon-check"></label>
          <span class="name">眼前有小黑影漂浮</span>
        </label>
      </li>
      <li>
        <label class="custom_check_label">
          <input type="checkbox" name="" id="eye4" value="4" hidden />
          <label for="eye4" class="icon-check"></label>
          <span class="name">看东西出现重影</span>
        </label>
      </li>
      <li>
        <label class="custom_check_label">
          <input type="checkbox" name="" id="eye5" value="5" hidden />
          <label for="eye5" class="icon-check"></label>
          <span class="name">看东西有闪光感</span>
        </label>
      </li>
      <li>
        <label class="custom_check_label">
          <input type="checkbox" name="" id="eye6" value="10" hidden />
          <label for="eye6" class="icon-check"></label>
          <span class="name">以上症状均无</span>
        </label>
      </li>
    </ul>
    <ul class="listCheckbox foot" style="display: none;">
      <li class="checked">
        <label class="custom_check_label">
          <input type="checkbox" name="" id="foot1" value="1" hidden />
          <label for="foot1" class="icon-check"></label>
          <span class="name">最近一次糖化血红蛋白（HBA1C）> 7.0%</span>
        </label>
      </li>
      <li>
        <label class="custom_check_label">
          <input type="checkbox" name="" id="foot2" value="2" hidden />
          <label for="foot2" class="icon-check"></label>
          <span class="name">吸烟</span>
        </label>
      </li>
      <li>
        <label class="custom_check_label">
          <input type="checkbox" name="" id="foot3" value="3" hidden />
          <label for="foot3" class="icon-check"></label>
          <span class="name">有视力问题</span>
        </label>
      </li>
      <li>
        <label class="custom_check_label">
          <input type="checkbox" name="" id="foot4" value="4" hidden />
          <label for="foot4" class="icon-check"></label>
          <span class="name">有肾脏疾病</span>
        </label>
      </li>
      <li>
        <label class="custom_check_label">
          <input type="checkbox" name="" id="foot5" value="5" hidden />
          <label for="foot5" class="icon-check"></label>
          <span class="name">有心血管疾病</span>
        </label>
      </li>
      <li>
        <label class="custom_check_label">
          <input type="checkbox" name="" id="foot6" value="6" hidden />
          <label for="foot6" class="icon-check"></label>
          <span class="name">下肢出现水肿（足踝以下、膝关节以下、大腿以下、无）</span>
        </label>
      </li>
      <li>
        <label class="custom_check_label">
          <input type="checkbox" name="" id="foot7" value="7" hidden />
          <label for="foot7" class="icon-check"></label>
          <span class="name">下肢或者足部存在畸形</span>
        </label>
      </li>
      <li>
        <label class="custom_check_label">
          <input type="checkbox" name="" id="foot8" value="8" hidden />
          <label for="foot8" class="icon-check"></label>
          <span class="name">足部动脉搏动</span>
        </label>
      </li>
      <li>
        <label class="custom_check_label">
          <input type="checkbox" name="" id="foot9" value="9" hidden />
          <label for="foot9" class="icon-check"></label>
          <span class="name">胫后动脉（内侧踝骨下方可触及）搏动</span>
        </label>
      </li>
      <li>
        <label class="custom_check_label">
          <input type="checkbox" name="" id="foot10" value="10" hidden />
          <label for="foot10" class="icon-check"></label>
          <span class="name">以上症状均无</span>
        </label>
      </li>
    </ul>
    <div class="custom-btm-fixed">
        <span class="custom-btm-btn" onclick="submit()">提交</span>
    </div>
  </form>
</div>
  <script type="text/javascript" src="../lib/js/flexible.js"></script>
  <script type="text/javascript" src="../lib/js/fastclick.min.js"></script>
  <script type="text/javascript" src="../lib/js/jquery.min.js"></script>
  <script type="text/javascript" src="../custom/js/native.js"></script>
  <script type="text/javascript" src="../custom/js/common.js"></script>
  <script src="../custom/js/api.js"></script>
  <script>
    FastClick.attach(document.body);
    var everyInput = $('ul li input'), riskType = '';
    var lastInput = $('ul li:last-child input'), obj = {};

    function submit() {
      // console.log(obj);
      if(obj.hasOwnProperty('10')){
        $.alert('您本次评估结果尚无糖尿病'+ riskType +'风险，请继续维持健康的生活方式，并定期体检。', function(){goBack()});
      }else if($.isEmptyObject(obj)){
        $.alert('请勾选符合您的选项');
      }else{
        $.alert('您本次评估结果具有糖尿病'+ riskType +'风险，建议您到居住地所属社区卫生服务中心进行并发症筛查，及早控制病情。', function(){goBack()});
      }
    }

    function goBack() {
      NativeFunc({
        ACTION: "OPENURL",
        PARAM: {
          URL: nativeObj.htmlPath + '/riskAssessmentType.html'
        }
      });
    }

    $(function () {
      var risk = getParams('risk');
      switch (risk) {
        case '1':
          riskType = '肾病';
          $('.kidney').show();
          break;
        case '2':
          riskType = '眼病';
          $('.eye').show();
          break;
        case '3':
          riskType = '足病';
          $('.foot').show();
          break;
        default:
          break;
      }

      everyInput.bind('click', function () {
        if($(this).val() !== '10' && !obj[($(this).val())]){
          obj[$(this).val()] = $(this).val();
          if(obj.hasOwnProperty('10')){
            delete obj['10'];
            lastInput.prop('checked', false);
          }
        }else{
          if($(this).prop('checked')){
            everyInput.prop('checked', false);
            $(this).prop('checked', true);
            obj = {};
            obj[$(this).val()] = $(this).val();
          }else{
            delete obj[$(this).val()];
          }
        }
      })
    })

  </script>
</body>
</html>
